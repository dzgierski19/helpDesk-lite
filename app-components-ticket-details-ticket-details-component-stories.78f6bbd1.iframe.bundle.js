(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[503],{"./src/app/components/ticket-details/ticket-details.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Loading:()=>Loading,NotFound:()=>NotFound,WithTriageSuggestion:()=>WithTriageSuggestion,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ticket_details_component_stories});var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),testing=__webpack_require__("./node_modules/@angular/router/fesm2022/testing.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),card=__webpack_require__("./node_modules/@angular/material/fesm2022/card.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),chips=__webpack_require__("./node_modules/@angular/material/fesm2022/chips.mjs"),progress_bar=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-bar.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),never=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/never.js"),throwError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var ticket_details_componentngResource=__webpack_require__("./src/app/components/ticket-details/ticket-details.component.scss?ngResource"),ticket_details_componentngResource_default=__webpack_require__.n(ticket_details_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),finalize=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/finalize.js"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),catchError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),enums=__webpack_require__("./src/app/models/enums.ts"),ticket_service=__webpack_require__("./src/app/services/ticket.service.ts"),auth_service=__webpack_require__("./src/app/services/auth.service.ts"),ui_service=__webpack_require__("./src/app/services/ui.service.ts");let TicketDetailsComponent=class TicketDetailsComponent{constructor(route,ticketService,authService,uiService,router){this.route=route,this.ticketService=ticketService,this.authService=authService,this.uiService=uiService,this.router=router,this.ticket$=(0,of.of)(void 0),this.externalUserInfo$=(0,of.of)(void 0),this.currentUserRole$=(0,of.of)(null),this.triageSuggestion=null,this.ticketFound=!0,this.UserRole=enums.gG,this.TicketPriority=enums.LH,this.TicketStatus=enums.Hs,this.progressActions=[{status:enums.Hs.InProgress,label:"Mark in progress",icon:"play_circle"},{status:enums.Hs.Resolved,label:"Resolve ticket",icon:"task_alt"}],this.ticketId=null,this.currentUserRole=null,this.destroy$=new Subject.B,this.statusUpdateInFlight=null,this.assignInFlight=!1,this.currentUser=null}ngOnInit(){const idParam=this.route.snapshot.paramMap.get("id");this.ticketId=idParam?Number(idParam):null,this.currentUserRole$=this.authService.currentUser$.pipe((0,map.T)(user=>user?.role??null)),this.authService.currentUser$.pipe((0,filter.p)(user=>!!user),(0,distinctUntilChanged.F)((prev,curr)=>prev?.id===curr?.id),(0,takeUntil.Q)(this.destroy$)).subscribe(user=>{this.currentUserRole=user.role,this.currentUser=user,this.refreshTicket(),this.externalUserInfo$=this.ticketService.getExternalUserInfo()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadTriageSuggestion(ticketId){this.canManageTriage()&&(this.uiService.showLoader(),this.ticketService.getTriageSuggestion(ticketId).pipe((0,finalize.j)(()=>this.uiService.hideLoader())).subscribe({next:suggestion=>{this.triageSuggestion=suggestion,this.uiService.showSnackbar("Triage suggestion ready.")},error:()=>{this.uiService.showSnackbar("Failed to load triage suggestion.")}}))}acceptTriageSuggestion(ticketId){this.triageSuggestion&&this.canManageTriage()&&(this.uiService.showLoader(),this.ticketService.updateTicket(ticketId,{status:this.triageSuggestion.suggested_status,priority:this.triageSuggestion.suggested_priority,tags:this.triageSuggestion.suggested_tags}).pipe((0,finalize.j)(()=>this.uiService.hideLoader())).subscribe({next:()=>{this.triageSuggestion=null,this.refreshTicket(),this.uiService.showSnackbar("Triage suggestion accepted!")},error:()=>{this.uiService.showSnackbar("Failed to accept triage suggestion.")}}))}rejectTriageSuggestion(){this.uiService.showLoader(),this.triageSuggestion=null,this.uiService.hideLoader(),this.uiService.showSnackbar("Triage suggestion rejected.")}goBack(){this.router.navigate(["/tickets"])}canUpdateTicket(){return this.currentUserRole===enums.gG.Agent||this.currentUserRole===enums.gG.Admin}toggleAssignee(ticketId,currentAssignee){if(!this.canUpdateTicket()||!this.currentUser||this.assignInFlight)return;const newAssigneeId=currentAssignee===this.currentUser.id?null:this.currentUser.id,actionLabel=newAssigneeId?"assigned":"unassigned";this.assignInFlight=!0,this.ticketService.updateTicket(ticketId,{assignee_id:newAssigneeId}).pipe((0,finalize.j)(()=>{this.assignInFlight=!1})).subscribe({next:()=>{this.uiService.showSnackbar(`Ticket ${actionLabel}.`),this.refreshTicket()},error:()=>{this.uiService.showSnackbar("Unable to update assignee.")}})}updateTicketStatus(ticketId,status){this.canUpdateTicket()&&this.statusUpdateInFlight!==status&&(this.statusUpdateInFlight=status,this.ticketService.updateTicket(ticketId,{status}).pipe((0,finalize.j)(()=>{this.statusUpdateInFlight=null})).subscribe({next:()=>{this.uiService.showSnackbar("Ticket status updated."),this.refreshTicket()},error:()=>{this.uiService.showSnackbar("Unable to update ticket status.")}}))}copyDescription(description){const value=description?.trim();if(!value)return void this.uiService.showSnackbar("Nothing to copy.");if(navigator?.clipboard?.writeText)return void navigator.clipboard.writeText(value).then(()=>this.uiService.showSnackbar("Description copied.")).catch(()=>this.uiService.showSnackbar("Copy failed."));const textarea=document.createElement("textarea");textarea.value=value,textarea.style.position="fixed",textarea.style.opacity="0",document.body.appendChild(textarea),textarea.select();try{document.execCommand("copy"),this.uiService.showSnackbar("Description copied.")}catch{this.uiService.showSnackbar("Copy failed.")}finally{document.body.removeChild(textarea)}}refreshTicket(){this.authService.isAuthenticated()&&(null!==this.ticketId?(this.ticketFound=!0,this.uiService.showLoader(),this.ticket$=this.ticketService.getTicket(this.ticketId).pipe((0,tap.M)(()=>{this.ticketFound=!0}),(0,catchError.W)(error=>(404===error?.status?this.ticketFound=!1:this.uiService.showSnackbar("Unable to load ticket details."),(0,of.of)(void 0))),(0,finalize.j)(()=>this.uiService.hideLoader()))):(this.ticketFound=!1,this.ticket$=(0,of.of)(void 0)))}canManageTriage(){return this.currentUserRole===enums.gG.Agent||this.currentUserRole===enums.gG.Admin}static{this.ctorParameters=()=>[{type:router.nX},{type:ticket_service.Y},{type:auth_service.u},{type:ui_service.o},{type:router.Ix}]}};TicketDetailsComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-ticket-details",template:'<ng-container *ngIf="ticketFound; else missingTicket">\n  <ng-container *ngIf="ticket$ | async as ticket; else loadingTicket">\n    <section class="ticket-details-wrapper">\n      <div class="ticket-hero mat-elevation-z3">\n        <div class="hero-bar">\n          <div class="hero-id-chip">\n            <mat-icon>confirmation_number</mat-icon>\n            <span>Ticket #{{ ticket.id }}</span>\n          </div>\n          <div class="hero-chip-row">\n            <app-priority-badge [priority]="ticket.priority"></app-priority-badge>\n            <app-status-label [status]="ticket.status"></app-status-label>\n          </div>\n        </div>\n\n        <div class="hero-body">\n          <div class="hero-text">\n            <span class="hero-eyebrow">Support ticket</span>\n            <h1 class="hero-title">{{ ticket.title }}</h1>\n            <p class="hero-meta">\n              Created {{ ticket.created_at | date: \'mediumDate\' }}\n              <ng-container *ngIf="ticket.updated_at">\n                · Updated {{ ticket.updated_at | date: \'medium\' }}\n              </ng-container>\n            </p>\n          </div>\n\n          <ng-container *ngIf="canUpdateTicket()">\n            <div class="hero-control-stack">\n              <div class="hero-actions">\n                <p class="hero-actions-label">Update progress</p>\n                <div class="hero-actions-buttons">\n                  <button\n                    mat-stroked-button\n                    color="primary"\n                    type="button"\n                    class="status-action-button progress-action-button"\n                    *ngFor="let action of progressActions"\n                    [disabled]="\n                      ticket.status === action.status || statusUpdateInFlight === action.status\n                    "\n                    (click)="updateTicketStatus(ticket.id, action.status)"\n                  >\n                    <mat-icon *ngIf="statusUpdateInFlight !== action.status">{{ action.icon }}</mat-icon>\n                    <mat-icon class="spinning-icon" *ngIf="statusUpdateInFlight === action.status"\n                      >autorenew</mat-icon\n                    >\n                    {{ action.label }}\n                  </button>\n                </div>\n              </div>\n\n              <div class="hero-actions hero-assign">\n                <p class="hero-actions-label">Assignment</p>\n                <div class="hero-actions-buttons">\n                  <button\n                    mat-stroked-button\n                    color="accent"\n                    type="button"\n                    class="status-action-button assign-action-button"\n                    [disabled]="assignInFlight || !currentUser"\n                    (click)="toggleAssignee(ticket.id, ticket.assignee_id)"\n                  >\n                    <mat-icon *ngIf="!assignInFlight">\n                      {{ ticket.assignee_id === currentUser?.id ? \'person_remove\' : \'person_add\' }}\n                    </mat-icon>\n                    <mat-icon class="spinning-icon" *ngIf="assignInFlight">autorenew</mat-icon>\n                    {{ ticket.assignee_id === currentUser?.id ? \'Unassign\' : \'Assign to me\' }}\n                  </button>\n                  <span class="hero-assign-note" *ngIf="currentUser">\n                    Current assignee: {{ ticket.assignee_id || \'Unassigned\' }}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n\n      <div class="details-grid">\n        <mat-card class="detail-card glass-card description-card">\n          <mat-card-content>\n            <div class="section-heading description-heading">\n              <div class="heading-icon">\n                <mat-icon>description</mat-icon>\n              </div>\n              <div>\n                <p class="section-eyebrow">Full Description</p>\n                <h2>Conversation &amp; context</h2>\n              </div>\n            </div>\n\n            <div class="description-shell">\n              <div class="description-shell-header">\n                <div class="description-decor">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <button\n                  type="button"\n                  class="ghost-pill copy-ghost"\n                  aria-label="Copy description"\n                  (click)="copyDescription(ticket.description)"\n                >\n                  <mat-icon>content_copy</mat-icon>\n                  Copy\n                </button>\n              </div>\n              <div class="ticket-description">\n                {{ ticket.description || \'No description provided.\' }}\n              </div>\n            </div>\n\n            <div class="ticket-meta-grid">\n              <div class="meta-card">\n                <span class="meta-label">Assignee</span>\n                <span class="meta-value">{{ ticket.assignee_id || \'Unassigned\' }}</span>\n              </div>\n              <div class="meta-card">\n                <span class="meta-label">Creator</span>\n                <span class="meta-value">#{{ ticket.creator_id }}</span>\n              </div>\n              <div class="meta-card">\n                <span class="meta-label">External User</span>\n                <span class="meta-value">{{ (externalUserInfo$ | async)?.name || \'N/A\' }}</span>\n              </div>\n            </div>\n\n            <div class="ticket-tags">\n              <span class="meta-label">Tags</span>\n              <mat-chip-set *ngIf="ticket.tags?.length; else noTags">\n                <mat-chip *ngFor="let tag of ticket.tags">{{ tag }}</mat-chip>\n              </mat-chip-set>\n              <ng-template #noTags><span class="muted-text">No tags</span></ng-template>\n            </div>\n          </mat-card-content>\n        </mat-card>\n\n        <mat-card class="detail-card glass-card status-history-card">\n          <mat-card-content>\n            <div class="section-heading">\n              <div class="heading-icon">\n                <mat-icon>timeline</mat-icon>\n              </div>\n              <div>\n                <p class="section-eyebrow">Status History</p>\n                <h2>Journey so far</h2>\n              </div>\n            </div>\n\n            <div class="status-timeline" *ngIf="ticket.status_changes?.length; else timelineFallback">\n              <div class="timeline-spine"></div>\n              <div class="timeline-item" *ngFor="let change of ticket.status_changes; let idx = index">\n                <div class="timeline-icon" [ngClass]="{ accent: idx === 0 }">\n                  <mat-icon>{{ idx === 0 ? \'flag_circle\' : \'sync_alt\' }}</mat-icon>\n                </div>\n                <div class="timeline-content">\n                  <div class="timeline-row">\n                    <p class="timeline-title">\n                      {{ change.old_status | titlecase }}\n                      <span class="arrow">→</span>\n                      {{ change.new_status | titlecase }}\n                    </p>\n                    <span class="timeline-timestamp">\n                      {{ change.changed_at | date: \'medium\' }}\n                    </span>\n                  </div>\n                  <div class="timeline-value">\n                    <app-status-label [status]="change.new_status"></app-status-label>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <ng-template #timelineFallback>\n              <p class="muted-text">No historical changes recorded for this ticket yet.</p>\n            </ng-template>\n          </mat-card-content>\n        </mat-card>\n\n        <mat-card class="detail-card glass-card triage-card ai-card">\n          <mat-card-content>\n            <div class="section-heading ai-heading ai-card-header">\n              <div class="heading-icon sparkle">\n                <mat-icon>auto_awesome</mat-icon>\n              </div>\n              <div>\n                <p class="section-eyebrow">AI Triage</p>\n                <h2>Aurora assistant</h2>\n              </div>\n              <span class="ai-badge">Smart routing</span>\n            </div>\n\n            <ng-container *ngIf="(currentUserRole$ | async) as role">\n              <ng-container *ngIf="role === UserRole.Agent || role === UserRole.Admin; else triageReadonly">\n                <ng-container *ngIf="triageSuggestion as suggestion; else triageActions">\n                  <div class="suggestion-details">\n                    <div class="suggestion-field">\n                      <span class="meta-label">Status</span>\n                      <app-status-label [status]="suggestion.suggested_status"></app-status-label>\n                    </div>\n                    <div class="suggestion-field">\n                      <span class="meta-label">Priority</span>\n                      <app-priority-badge [priority]="suggestion.suggested_priority"></app-priority-badge>\n                    </div>\n                    <div class="suggestion-field">\n                      <span class="meta-label">Suggested tags</span>\n                      <mat-chip-set *ngIf="suggestion.suggested_tags.length; else noSuggestedTags">\n                        <mat-chip *ngFor="let tag of suggestion.suggested_tags">{{ tag }}</mat-chip>\n                      </mat-chip-set>\n                      <ng-template #noSuggestedTags><span class="muted-text">None</span></ng-template>\n                    </div>\n                  </div>\n                  <div class="triage-actions">\n                    <button\n                      mat-raised-button\n                      type="button"\n                      class="gradient-pill"\n                      (click)="acceptTriageSuggestion(ticket.id)"\n                    >\n                      <mat-icon>check_circle</mat-icon>\n                      Accept\n                    </button>\n                    <button\n                      mat-raised-button\n                      type="button"\n                      class="gradient-pill outline"\n                      (click)="loadTriageSuggestion(ticket.id)"\n                    >\n                      <mat-icon>refresh</mat-icon>\n                      Refresh\n                    </button>\n                    <button mat-button type="button" class="link-button" (click)="rejectTriageSuggestion()">\n                      Dismiss\n                    </button>\n                  </div>\n                </ng-container>\n                <ng-template #triageActions>\n                  <p class="muted-text">\n                    Need a fresh recommendation? Let Aurora analyze the ticket details for you.\n                  </p>\n                  <button\n                    mat-raised-button\n                    type="button"\n                    class="gradient-pill"\n                    (click)="loadTriageSuggestion(ticket.id)"\n                  >\n                    <mat-icon>auto_fix_high</mat-icon>\n                    Generate Suggestion\n                  </button>\n                </ng-template>\n              </ng-container>\n            </ng-container>\n            <ng-template #triageReadonly>\n              <p class="muted-text">Only agents and admins can manage triage suggestions.</p>\n            </ng-template>\n          </mat-card-content>\n        </mat-card>\n      </div>\n    </section>\n\n    <div class="actions">\n      <button mat-button (click)="goBack()">Go Back</button>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template #loadingTicket>\n  <div class="loading-state">\n    <mat-progress-bar mode="indeterminate"></mat-progress-bar>\n  </div>\n</ng-template>\n\n<ng-template #missingTicket>\n  <mat-card class="ticket-card not-found-card">\n    <mat-card-title>Ticket Not Found</mat-card-title>\n    <mat-card-content>\n      <p>We could not find the requested ticket.</p>\n      <button mat-button (click)="goBack()">Go Back</button>\n    </mat-card-content>\n  </mat-card>\n</ng-template>\n',styles:[ticket_details_componentngResource_default()]})],TicketDetailsComponent);var ticket_card_component=__webpack_require__("./src/app/components/ticket-card/ticket-card.component.ts"),priority_badge_component=__webpack_require__("./src/app/components/priority-badge/priority-badge.component.ts"),status_label_component=__webpack_require__("./src/app/components/status-label/status-label.component.ts");const baseDeclarations=[TicketDetailsComponent,ticket_card_component.Q,priority_badge_component.v,status_label_component.E],baseImports=[common.CommonModule,testing.c,animations.NoopAnimationsModule,card.Hu,fesm2022_button.Hl,chips.YN,progress_bar.PO,icon.m_],createModuleMetadata=config=>({declarations:[...baseDeclarations],imports:[...baseImports],providers:[{provide:ticket_service.Y,useValue:createTicketService(config.ticket$,config.externalUser)},{provide:auth_service.u,useValue:createAuthService(config.userRole)},{provide:ui_service.o,useValue:createUiService(config.keepLoader??!1)},{provide:router.nX,useValue:createActivatedRoute(config.routeId)}]}),createTicketService=(ticket$,externalUser)=>{const defaultSuggestion={suggested_status:enums.Hs.InProgress,suggested_priority:enums.LH.Medium,suggested_tags:["api","triage"]};return{getTicket:()=>ticket$,getExternalUserInfo:()=>(0,of.of)(externalUser??{name:"Acme Support"}),getTriageSuggestion:()=>(0,of.of)(defaultSuggestion),updateTicket:()=>(0,of.of)({...sampleTicket})}},createAuthService=role=>{const user={id:1,name:"Story User",email:"story@example.com",role},subject=new BehaviorSubject.t(user),authState$=new BehaviorSubject.t(!0);return{currentUser$:subject.asObservable(),isAuthenticated$:authState$.asObservable(),isAuthenticated:()=>!0,getSnapshotUser:()=>user}},createUiService=keepLoader=>{const loading$=new BehaviorSubject.t(keepLoader);return{loading$,showLoader:()=>loading$.next(!0),hideLoader:()=>{keepLoader||loading$.next(!1)},showSnackbar:()=>{}}},createActivatedRoute=id=>({snapshot:{paramMap:(0,router.wl)({id:id.toString()})}}),sampleTicket={id:501,title:"API error when uploading CSV files",description:"Enterprise customers report intermittent 500 responses when uploading CSV attachments larger than 5MB. The logs show timeout errors.",priority:enums.LH.High,status:enums.Hs.InProgress,assignee_id:9,creator_id:27,tags:["api","uploads","regression"],created_at:"2024-05-08T09:30:00.000Z",updated_at:"2024-05-09T14:10:00.000Z",status_changes:[{id:1,ticket_id:501,old_status:enums.Hs.New,new_status:enums.Hs.InProgress,changed_at:"2024-05-08T11:15:00.000Z"},{id:2,ticket_id:501,old_status:enums.Hs.InProgress,new_status:enums.Hs.Resolved,changed_at:"2024-05-09T08:45:00.000Z"},{id:3,ticket_id:501,old_status:enums.Hs.Resolved,new_status:enums.Hs.InProgress,changed_at:"2024-05-09T13:50:00.000Z"}]},sampleSuggestion={suggested_status:enums.Hs.InProgress,suggested_priority:enums.LH.High,suggested_tags:["uploads","priority"]},ticket_details_component_stories={title:"Containers/TicketDetails",component:TicketDetailsComponent,parameters:{layout:"fullscreen"},render:()=>({template:'\n      <div class="app-shell">\n        <header class="app-header">\n          <div class="header-ambient">\n            <span class="ambient-orb ambient-orb--one"></span>\n            <span class="ambient-orb ambient-orb--two"></span>\n            <span class="ambient-orb ambient-orb--three"></span>\n          </div>\n          <div class="brand-line">\n            <div class="brand">\n              <div class="brand-logo">\n                <span>HL</span>\n                <svg viewBox="0 0 120 120" aria-hidden="true">\n                  <defs>\n                    <linearGradient id="storybook-glow" x1="0" y1="0" x2="1" y2="1">\n                      <stop offset="0%" stop-color="#38bdf8" stop-opacity="0.9" />\n                      <stop offset="100%" stop-color="#a855f7" stop-opacity="0.9" />\n                    </linearGradient>\n                  </defs>\n                  <circle cx="60" cy="60" r="58" stroke="url(#storybook-glow)" stroke-width="4" fill="none" />\n                </svg>\n              </div>\n              <div class="brand-copy">\n                <p class="eyebrow">Helpdesk Lite</p>\n                <h1>Customer ticketing workspace</h1>\n                <p class="subtitle">Manage authentication issues, requests, and AI-powered triage suggestions in one place.</p>\n              </div>\n            </div>\n          </div>\n          <nav class="app-actions">\n            <div class="user-summary">\n              <div class="user-name">Story User</div>\n              <div class="user-role">Agent</div>\n            </div>\n            <button class="new-ticket-button" type="button">Create Ticket</button>\n            <button class="logout-button" type="button">Logout</button>\n          </nav>\n          <div class="hero-metrics">\n            <div class="header-pills">\n              <span class="pill pill--online">\n                <span class="dot"></span>\n                Backend live\n              </span>\n              <span class="pill pill--storybook">\n                <mat-icon aria-hidden="true">auto_graph</mat-icon>\n                Storybook synced\n              </span>\n              <span class="pill pill--llm">LLM-assisted delivery</span>\n            </div>\n          </div>\n        </header>\n        <main class="app-content">\n          <section class="summary-bar">\n            <div class="summary-item">\n              <span class="summary-label">Live tickets</span>\n              <strong>10</strong>\n            </div>\n            <div class="summary-item">\n              <span class="summary-label">Awaiting triage</span>\n              <strong>4</strong>\n            </div>\n            <div class="summary-item">\n              <span class="summary-label">Avg response</span>\n              <strong>12h</strong>\n            </div>\n          </section>\n          <app-ticket-details></app-ticket-details>\n        </main>\n      </div>\n    '})},Default={render:()=>({props:{},moduleMetadata:createModuleMetadata({ticket$:(0,of.of)(sampleTicket),userRole:enums.gG.Agent,routeId:sampleTicket.id})})},Loading={render:()=>({props:{},moduleMetadata:createModuleMetadata({ticket$:never.t,userRole:enums.gG.Agent,routeId:sampleTicket.id,keepLoader:!0})})},NotFound={render:()=>({props:{},moduleMetadata:createModuleMetadata({ticket$:(0,throwError.$)(()=>({status:404})),userRole:enums.gG.Reporter,routeId:9999})})},WithTriageSuggestion={render:()=>({props:{},moduleMetadata:createModuleMetadata({ticket$:(0,of.of)({...sampleTicket,status:enums.Hs.InProgress}),userRole:enums.gG.Admin,routeId:sampleTicket.id}),onComponentInstance:instance=>{instance.triageSuggestion=sampleSuggestion}})},__namedExportsOrder=["Default","Loading","NotFound","WithTriageSuggestion"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    props: {},\n    moduleMetadata: createModuleMetadata({\n      ticket$: of(sampleTicket),\n      userRole: UserRole.Agent,\n      routeId: sampleTicket.id\n    })\n  })\n}",...Default.parameters?.docs?.source}}},Loading.parameters={...Loading.parameters,docs:{...Loading.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    props: {},\n    moduleMetadata: createModuleMetadata({\n      ticket$: NEVER as Observable<Ticket>,\n      userRole: UserRole.Agent,\n      routeId: sampleTicket.id,\n      keepLoader: true\n    })\n  })\n}",...Loading.parameters?.docs?.source}}},NotFound.parameters={...NotFound.parameters,docs:{...NotFound.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    props: {},\n    moduleMetadata: createModuleMetadata({\n      ticket$: throwError(() => ({\n        status: 404\n      })) as Observable<Ticket>,\n      userRole: UserRole.Reporter,\n      routeId: 9999\n    })\n  })\n}",...NotFound.parameters?.docs?.source}}},WithTriageSuggestion.parameters={...WithTriageSuggestion.parameters,docs:{...WithTriageSuggestion.parameters?.docs,source:{originalSource:"{\n  render: () => ({\n    props: {},\n    moduleMetadata: createModuleMetadata({\n      ticket$: of({\n        ...sampleTicket,\n        status: TicketStatus.InProgress\n      }),\n      userRole: UserRole.Admin,\n      routeId: sampleTicket.id\n    }),\n    onComponentInstance: (instance: TicketDetailsComponent) => {\n      instance.triageSuggestion = sampleSuggestion;\n    }\n  })\n}",...WithTriageSuggestion.parameters?.docs?.source}}}},"./src/app/components/ticket-details/ticket-details.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":root {\n  --color-primary: #6366f1;\n  --color-accent: #ec4899;\n  --color-warn: #f44336;\n  --color-success: #22c55e;\n  --color-info: #0ea5e9;\n  --color-text: #0f172a;\n  --color-background: #f8fafc;\n  --brand-blue: #38bdf8;\n  --brand-purple: #a855f7;\n  --brand-cyan: #5eead4;\n  --gradient-brand: linear-gradient(120deg, #38bdf8, #a855f7);\n  --gradient-aurora: radial-gradient(circle at top, rgba(56, 189, 248, 0.2), transparent 60%),\n    radial-gradient(circle at bottom, rgba(168, 85, 247, 0.18), transparent 65%),\n    #0f172a;\n  --surface-glass: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(248, 251, 255, 0.9));\n  --radius-card: 1.25rem;\n  --shadow-card: 0 24px 60px rgba(15, 23, 42, 0.16);\n}\n\n.ticket-details-wrapper {\n  margin: 1.5rem auto 2rem;\n  max-width: 1180px;\n  padding: 0 1.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.75rem;\n}\n\n.ticket-hero {\n  background: var(--gradient-aurora);\n  border-radius: var(--radius-card);\n  padding: 1.5rem 1.75rem;\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  box-shadow: var(--shadow-card);\n}\n.ticket-hero .hero-bar {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  flex-wrap: wrap;\n  padding: 0.75rem 1rem;\n  border-radius: 14px;\n  background: rgba(255, 255, 255, 0.08);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.18);\n}\n.ticket-hero .hero-body {\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\n  align-items: center;\n  gap: 1.25rem;\n}\n.ticket-hero .hero-text {\n  flex: 1 1 280px;\n}\n.ticket-hero .hero-id-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.55rem 1.2rem;\n  border-radius: 999px;\n  background: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  font-weight: 700;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);\n}\n.ticket-hero .hero-id-chip mat-icon {\n  font-size: 18px;\n  height: 18px;\n  width: 18px;\n}\n.ticket-hero .hero-eyebrow {\n  letter-spacing: 0.2em;\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  opacity: 0.8;\n}\n.ticket-hero .hero-title {\n  margin: 0.25rem 0;\n  font-size: clamp(1.5rem, 2.5vw, 2.3rem);\n}\n.ticket-hero .hero-meta {\n  opacity: 0.85;\n  margin: 0;\n}\n.ticket-hero .hero-chip-row {\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.ticket-hero .hero-chip-row app-priority-badge .badge,\n.ticket-hero .hero-chip-row app-status-label .label {\n  display: inline-flex;\n  align-items: center;\n  border-radius: 999px;\n  padding: 0.35rem 1rem;\n  font-size: 0.85rem;\n  line-height: 1;\n  min-width: 90px;\n  justify-content: center;\n  text-align: center;\n  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.15);\n}\n.ticket-hero .hero-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  flex: 1 1 auto;\n}\n.ticket-hero .hero-actions .hero-actions-label {\n  text-transform: uppercase;\n  letter-spacing: 0.15em;\n  font-size: 0.7rem;\n  margin: 0;\n  opacity: 0.8;\n}\n.ticket-hero .hero-actions .hero-actions-buttons {\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n.ticket-hero .hero-assign .hero-actions-buttons {\n  align-items: center;\n}\n.ticket-hero .hero-assign .hero-assign-note {\n  font-size: 0.85rem;\n  opacity: 0.85;\n}\n\n.hero-control-stack {\n  display: grid;\n  gap: 0.75rem;\n  align-items: start;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n.status-action-button {\n  border-radius: 999px;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.45rem;\n  padding: 0.45rem 1.6rem;\n  font-weight: 600;\n  text-transform: none;\n  letter-spacing: 0.02em;\n  color: #fff;\n  border: 1px solid rgba(255, 255, 255, 0.35);\n}\n.status-action-button:disabled {\n  opacity: 0.65;\n}\n.status-action-button mat-icon {\n  font-size: 1.15rem;\n}\n\n.progress-action-button {\n  background: linear-gradient(135deg, #fb7185, #ec4899);\n  box-shadow: 0 18px 35px rgba(236, 72, 153, 0.35);\n}\n\n.assign-action-button {\n  background: rgba(255, 255, 255, 0.15);\n  color: #fff;\n  border-color: rgba(255, 255, 255, 0.25);\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);\n}\n\n.spinning-icon {\n  animation: spin 1s linear infinite;\n}\n\n.details-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  gap: 1.5rem;\n  align-items: stretch;\n}\n\n.detail-card {\n  height: 100%;\n  border-radius: var(--radius-card);\n  box-shadow: 0 15px 40px rgba(15, 23, 42, 0.08);\n  overflow: hidden;\n  position: relative;\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 251, 255, 0.85));\n}\n\n.detail-card .mat-mdc-card-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  padding: 1.75rem;\n}\n\n.glass-card {\n  background: linear-gradient(135deg, rgba(56, 189, 248, 0.12), rgba(168, 85, 247, 0.12));\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  backdrop-filter: blur(20px);\n}\n\n.section-heading {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n.section-heading h2 {\n  margin: 0;\n  font-size: 1.25rem;\n}\n\n.description-heading {\n  margin-bottom: 0.25rem;\n}\n\n.heading-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 16px;\n  background: rgba(255, 255, 255, 0.5);\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-primary);\n  box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.05);\n}\n.heading-icon mat-icon {\n  font-size: 24px;\n}\n\n.ai-heading .heading-icon {\n  color: #fbbf24;\n  box-shadow: 0 10px 30px rgba(251, 191, 36, 0.35);\n}\n\n.section-eyebrow {\n  text-transform: uppercase;\n  letter-spacing: 0.18em;\n  font-size: 0.7rem;\n  margin: 0;\n  opacity: 0.7;\n}\n\n.ghost-pill {\n  border-radius: 999px;\n  border: 1px solid rgba(255, 255, 255, 0.6);\n  background: rgba(255, 255, 255, 0.2);\n  color: var(--color-text);\n  padding: 0.45rem 1.25rem;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 600;\n  text-transform: none;\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2);\n}\n\n.copy-ghost {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.35);\n  color: #0f172a;\n}\n\n.description-shell {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.58), rgba(248, 251, 255, 0.7));\n  border-radius: 18px;\n  padding: 1rem;\n  border: 1px solid rgba(15, 23, 42, 0.06);\n  box-shadow: 0 16px 30px rgba(15, 23, 42, 0.1);\n  backdrop-filter: blur(12px);\n  display: grid;\n  gap: 0.75rem;\n}\n\n.description-shell-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.75rem;\n}\n\n.description-decor {\n  width: 44px;\n  height: 44px;\n  border-radius: 14px;\n  background: linear-gradient(135deg, rgba(56, 189, 248, 0.25), rgba(168, 85, 247, 0.3));\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: #0f172a;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);\n}\n.description-decor mat-icon {\n  font-size: 22px;\n}\n\n.ticket-description {\n  border-radius: 1rem;\n  padding: 1.1rem 1.25rem;\n  background: var(--surface-glass);\n  white-space: pre-line;\n  line-height: 1.6;\n  color: rgba(15, 23, 42, 0.92);\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);\n}\n\n.ticket-meta-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n  gap: 1rem;\n}\n\n.meta-card {\n  padding: 0.75rem 1rem;\n  border-radius: 0.85rem;\n  background: rgba(15, 23, 42, 0.05);\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n}\n\n.meta-label {\n  font-size: 0.75rem;\n  text-transform: uppercase;\n  letter-spacing: 0.15em;\n  color: rgba(15, 23, 42, 0.6);\n}\n\n.meta-value {\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n.ticket-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.65rem;\n  align-items: center;\n}\n.ticket-tags mat-chip {\n  background: rgba(255, 255, 255, 0.85);\n  border-radius: 999px;\n  font-weight: 500;\n}\n\n.status-timeline {\n  position: relative;\n  padding-left: 2.75rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.35rem;\n  isolation: isolate;\n}\n\n.timeline-spine {\n  position: absolute;\n  left: 1.2rem;\n  top: 0.5rem;\n  bottom: 0.5rem;\n  width: 3px;\n  background: linear-gradient(180deg, #38bdf8, #a855f7 50%, #5eead4);\n  border-radius: 999px;\n  box-shadow: 0 0 0 6px rgba(56, 189, 248, 0.05);\n}\n\n.timeline-item {\n  display: grid;\n  grid-template-columns: auto 1fr;\n  gap: 0.85rem 1rem;\n  align-items: flex-start;\n}\n\n.timeline-icon {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, rgba(56, 189, 248, 0.25), rgba(168, 85, 247, 0.2));\n  color: #0ea5e9;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 auto;\n  box-shadow: 0 8px 20px rgba(56, 189, 248, 0.25);\n  position: relative;\n  z-index: 1;\n}\n.timeline-icon.accent {\n  background: rgba(168, 85, 247, 0.18);\n  color: #a855f7;\n}\n.timeline-icon.neutral {\n  background: rgba(15, 23, 42, 0.12);\n  color: rgba(15, 23, 42, 0.7);\n}\n\n.timeline-content {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 251, 255, 0.94));\n  border-radius: 1rem;\n  padding: 0.95rem 1.15rem;\n  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.08);\n  flex: 1;\n  position: relative;\n  z-index: 1;\n}\n\n.timeline-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem 1rem;\n  flex-wrap: wrap;\n}\n\n.timeline-title {\n  margin: 0;\n  font-weight: 700;\n}\n\n.timeline-value {\n  font-weight: 600;\n  color: var(--color-text);\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.timeline-timestamp {\n  display: block;\n  font-size: 0.85rem;\n  color: rgba(15, 23, 42, 0.7);\n}\n\n.ai-card {\n  background: linear-gradient(140deg, rgba(56, 189, 248, 0.16), rgba(5, 150, 105, 0.18), rgba(168, 85, 247, 0.14));\n  color: var(--color-text);\n  border: 1px solid rgba(255, 255, 255, 0.35);\n  box-shadow: 0 22px 48px rgba(15, 23, 42, 0.12);\n}\n\n.ai-card-header {\n  align-items: center;\n}\n\n.ai-badge {\n  padding: 0.45rem 0.85rem;\n  border-radius: 999px;\n  background: rgba(255, 255, 255, 0.18);\n  color: #0f172a;\n  font-weight: 700;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  font-size: 0.75rem;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);\n}\n\n.suggestion-details {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n  gap: 1rem;\n}\n\n.suggestion-field {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.suggestion-field mat-chip {\n  background: rgba(255, 255, 255, 0.65);\n  font-weight: 600;\n  color: #0f172a;\n}\n\n.triage-actions {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n  align-items: center;\n}\n\n.gradient-pill {\n  border-radius: 999px;\n  text-transform: none;\n  font-weight: 600;\n  padding: 0.65rem 1.6rem;\n  background: linear-gradient(120deg, #38bdf8, #a855f7);\n  color: #fff;\n  box-shadow: 0 18px 35px rgba(56, 189, 248, 0.25);\n  border: none;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.gradient-pill.outline {\n  background: rgba(255, 255, 255, 0.18);\n  color: #0f172a;\n  border: 1px solid rgba(15, 23, 42, 0.15);\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.4);\n}\n\n.link-button {\n  text-transform: none;\n  font-weight: 600;\n}\n\n.muted-text {\n  color: rgba(15, 23, 42, 0.6);\n}\n\n.actions {\n  margin: 0 auto 2rem;\n  max-width: 1180px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n@media (max-width: 768px) {\n  .ticket-details-wrapper {\n    padding: 0 1rem;\n  }\n  .ticket-hero {\n    padding: 1.25rem;\n  }\n  .ticket-hero .hero-body {\n    grid-template-columns: 1fr;\n  }\n  .details-grid {\n    grid-template-columns: 1fr;\n  }\n  .triage-actions {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  .actions {\n    padding: 0 1rem;\n    justify-content: center;\n  }\n  .timeline-row {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);